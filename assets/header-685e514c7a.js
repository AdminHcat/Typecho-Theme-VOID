TOC={toggle:function(){$("body").toggleClass("sidebar-show")},close:function(){$("body").removeClass("sidebar-show")},open:function(){$("body").addClass("sidebar-show")}},VOID_Util={throttle:function(t,n,s){var i,a=new Date;return function(){var e=arguments,o=new Date;clearTimeout(i),s<=o-a?(t.apply(this,e),a=o):i=setTimeout(t,n)}},clickIn:function(e,o){return!!$(o).length&&($(o).has(e.target).length||$(o).get(0)===e.target)},getDeviceState:function(e){var o;return window.getComputedStyle?o=window.getComputedStyle(e).getPropertyValue("z-index"):e.currentStyle&&(o=e.currentStyle["z-index"]),parseInt(o,10)},getPrefersDarkModeState:function(){var e=document.createElement("div");return e.className="dark-mode-state-indicator",document.body.appendChild(e),11===VOID_Util.getDeviceState(e)},setCookie:function(e,o,t){document.cookie=0<t?e+"="+escape(o)+";max-age="+String(t)+";path=/":e+"="+escape(o)+";path=/"},getCookie:function(e){var o=new RegExp("(^| )"+e+"=([^;]*)(;|$)"),t=document.cookie.match(o);return t?unescape(t[2]):null}},VOID_Ui={registerLazyLoadImg:function(o,t){var e=new Image;e.src=o,e.onload=function(){var e=document.querySelector(t);e.style.backgroundImage="url("+o+")",e.parentElement.classList.remove("loading"),e.classList.add("loaded")}},checkGoTop:function(){$(document).scrollTop()>window.innerHeight?$("#go-top").addClass("show"):$("#go-top").removeClass("show")},checkHeader:function(){if(2!=VOIDConfig.headerMode){var e=767<$(window).width()?150:60;$(document).scrollTop()>e?$("body>header").addClass("pull-up"):$("body>header").removeClass("pull-up")}},checkScrollTop:function(e){null!=VOID_Util.getCookie("void_pos")&&-1!=parseFloat(VOID_Util.getCookie("void_pos"))&&($(document).scrollTop(parseFloat(VOID_Util.getCookie("void_pos"))),VOID_Util.setCookie("void_pos",-1))},toggleSearch:function(){$(".mobile-search-form").toggleClass("opened"),$(".mobile-search-form input").focus()},toggleNav:function(e){$(e).toggleClass("pushed"),$("header").toggleClass("opened"),TOC.close(),$(e).hasClass("pushed")?($("#nav-mobile").fadeIn(200),VOID_Ui.openModal()):(VOID_Ui.closeModal(),$("#nav-mobile").fadeOut(200))},toggleSettingPanel:function(){$("body").hasClass("setting-panel-show")?($("body").removeClass("setting-panel-show"),setTimeout(function(){$("#setting-panel").hide()},300)):($("#login-panel").length&&$("#login-panel").removeClass("show"),$("#setting-panel").show(),setTimeout(function(){$("body").addClass("setting-panel-show")},50))},toggleSerif:function(e,o){$(".font-indicator").removeClass("checked"),$(e).addClass("checked"),o?($("#stylesheet_noto").length<1&&$("body").append('<link id="stylesheet_noto" href="https://fonts.googleapis.com/css?family=Noto+Serif+SC:400,700&amp;subset=chinese-simplified" rel="stylesheet">'),$("body").addClass("serif"),VOID_Util.setCookie("serif","1",2592e3)):($("#stylesheet_droid").length<1&&$("body").append('<link id="stylesheet_droid" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700" rel="stylesheet">'),$("body").removeClass("serif"),VOID_Util.setCookie("serif","0",2592e3))},adjustTextsize:function(e){var o=parseInt($("body").attr("fontsize"));if(e){if(5<=o)return void VOID.alert("已经是最大了！");$("body").attr("fontsize",String(o+1))}else{if(o<=1)return void VOID.alert("已经是最小了！");$("body").attr("fontsize",String(o-1))}VOID_Util.setCookie("textsize",$("body").attr("fontsize"),2592e3)},toggleLoginForm:function(){$("#login-panel").toggleClass("show"),$("#login-panel input[name=referer]").val(window.location.href),$("#loggin-form").hasClass("need-refresh")&&$("#login-panel").hasClass("show")&&$.ajax({type:"POST",url:window.location.href,data:{void_action:"getLoginAction"},success:function(e){$("form#loggin-form").attr("action",e),$("#loggin-form").removeClass("need-refresh")},error:function(){VOID.alert("请求登陆参数错误。请在刷新后尝试登陆。"),setTimeout(function(){location.reload()},1e3)}})},lazyload:function(){VOIDConfig.lazyload&&window.addEventListener("scroll",VOID_Util.throttle(function(){var n=document.documentElement.clientHeight,s=document.documentElement.scrollTop||document.body.scrollTop;$.each($("img.lazyload"),function(e,o){if($(o).offset().top<n+s&&$(o).offset().top+$(o).height()>s&&!$(o).hasClass("loaded")&&!$(o).hasClass("error")){var t=new Image;t.src=$(o).attr("data-src"),t.onload=function(){$(o).animate({opacity:0},150),setTimeout(function(){$(o).attr("src",$(o).attr("data-src")),$(o).addClass("loaded"),$(o).animate({opacity:1},180)},180)},t.onerror=function(){$(o).addClass("error")}}})},100,1e3))},headroom:function(){if(0==VOIDConfig.headerMode){var e=document.querySelector("body>header");new Headroom(e,{offset:60}).init()}},toggleArchive:function(e){var o="#year-"+$(e).attr("data-year");if($(o).hasClass("shrink")){$(e).html("-"),$(o).removeClass("shrink");var t=parseInt($(e).attr("data-num"));$(o).css("max-height",49*t+"px")}else $(e).html("+"),$(o).addClass("shrink"),$(o).css("max-height","0")},rememberPos:function(){VOID_Util.setCookie("void_pos",String($(document).scrollTop()))},scrollTop:0,openModal:function(){VOID_Ui.scrollTop=document.scrollingElement.scrollTop,document.body.classList.add("modal-open"),document.body.style.top=-VOID_Ui.scrollTop+"px"},closeModal:function(){document.body.classList.remove("modal-open"),document.scrollingElement.scrollTop=VOID_Ui.scrollTop},tuneBg:function(){window.innerHeight<window.innerWidth?($("body").addClass("screen-horizontal"),$("body").removeClass("screen-vertical"),VOIDConfig.horizontalBg?$("body").addClass("with-bg"):$("body").removeClass("with-bg")):($("body").addClass("screen-vertical"),$("body").removeClass("screen-horizontal"),VOIDConfig.verticalBg?$("body").addClass("with-bg"):$("body").removeClass("with-bg"))},reset:function(){$(".toggle").removeClass("pushed"),$(".mobile-search").removeClass("opened"),$("header").removeClass("opened"),$("#setting-panel").removeClass("show"),$("body").hasClass("modal-open")&&VOID_Ui.closeModal(),$("#nav-mobile").fadeOut(200),TOC.close(),0<$(".TOC").length&&tocbot.destroy()},MasonryCtrler:{masonry:function(){$("#masonry").addClass("masonry").masonry({itemSelector:".masonry-item",gutter:30,isAnimated:!0})},init:function(){VOID_Ui.MasonryCtrler.check()&&0==VOIDConfig.indexStyle&&($(".masonry-item").addClass("masonry-ready"),VOID_Ui.MasonryCtrler.masonry()),$(".masonry-item").addClass("done")},check:function(){return $("#masonry").length&&768<=window.innerWidth},watch:function(e){var o=document.getElementById(e);new ResizeSensor(o,function(){VOID_Ui.MasonryCtrler.check()&&$("#masonry").hasClass("masonry")&&VOID_Ui.MasonryCtrler.masonry()})}},DarkModeSwitcher:{checkColorScheme:function(){if(0==VOIDConfig.colorScheme)if(VOIDConfig.followSystemColorScheme&&VOID_Util.getPrefersDarkModeState()){document.body.classList.add("theme-dark");var e=VOID_Util.getCookie("theme_dark");"1"!=e&&VOID.alert("已为您开启深色模式。"),VOID_Util.setCookie("theme_dark","1",7200)}else if(null==VOID_Util.getCookie("theme_dark")){sunset=new Date((new Date).setHours(Math.floor(VOIDConfig.darkModeTime.start),60*(VOIDConfig.darkModeTime.start-Math.floor(VOIDConfig.darkModeTime.start)),0)),sunrise=new Date((new Date).setHours(Math.floor(VOIDConfig.darkModeTime.end),60*(VOIDConfig.darkModeTime.end-Math.floor(VOIDConfig.darkModeTime.end)),0));var o=new Date,t=VOIDConfig.darkModeTime.start,n=VOIDConfig.darkModeTime.end,s=o.getHours()+o.getMinutes()/60;if(t<s||s<n){document.body.classList.add("theme-dark"),t<s&&(sunrise=new Date(sunrise.getTime()+864e5));var i=(sunrise.getTime()-o.getTime())/1e3;VOID_Util.setCookie("theme_dark","1",parseInt(i)),VOID.alert("日落了，夜间模式已开启。")}else document.body.classList.remove("theme-dark")}else"0"==(e=VOID_Util.getCookie("theme_dark"))?document.body.classList.remove("theme-dark"):"1"==e&&document.body.classList.add("theme-dark")},toggleByHand:function(){$("#toggle-night").addClass("switching"),setTimeout(function(){$("body").toggleClass("theme-dark"),$("body").hasClass("theme-dark")?VOID_Util.setCookie("theme_dark","1",0):VOID_Util.setCookie("theme_dark","0",0),setTimeout(function(){$("#toggle-night").removeClass("switching")},1e3)},600)}},Swiper:{clientX:null,clientY:null,start:function(e){this.clientX=e.originalEvent.changedTouches[0].clientX,this.clientY=e.originalEvent.changedTouches[0].clientY},end:function(e){30<Math.abs(this.clientY-e.originalEvent.changedTouches[0].clientY)&&($("body").removeClass("setting-panel-show"),setTimeout(function(){$("#setting-panel").hide()},300)),this.clientX=null,this.clientY=null}}},"ontouchstart"in document&&($(document).on("touchstart",function(e){VOID_Ui.Swiper.start(e)}),$(document).on("touchend",function(e){VOID_Ui.Swiper.end(e)})),$(document).on("scroll",function(){VOID_Ui.checkGoTop(),VOID_Ui.checkHeader(),"ontouchstart"in document||($("body").removeClass("setting-panel-show"),setTimeout(function(){$("#setting-panel").hide()},300))});